/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */

plugins {
  id 'java'
  id 'eclipse'
  id 'idea'
  id 'jacoco'
  id 'io.franzbecker.gradle-lombok' version '1.11'
}

sourceCompatibility = "$sourceCompatibility" // -source
targetCompatibility = "$targetCompatibility" // -target

apply plugin: 'war'

war {
  archiveName = project.property('archiveName')
}

repositories {
  mavenCentral()
  jcenter()
}

dependencies {
  compile('ch.qos.logback:logback-classic:1.2.3')
  compileOnly('fish.payara.extras:payara-embedded-web:5.1+')
  compileOnly('fish.payara.api:payara-api:5.1+')
  //compileOnly('fish.payara.extras:payara-micro:4.1.152.1')
}

lombok {
  sha256 = ''
}

import io.franzbecker.gradle.lombok.task.DelombokTask
task delombok(type: DelombokTask, dependsOn: compileJava) {
  ext.outputDir = file("$buildDir/delombok")
  outputs.dir(outputDir)
  sourceSets.main.java.srcDirs.each {
    inputs.dir(it)
    args(it, "-d", outputDir)
  }
}
task delombokHelp(type: DelombokTask) {
  args "--help"
}

eclipse.classpath.file.whenMerged { cp ->
  cp.entries.findAll { entry ->
    if (entry.kind == "output") {
      entry.path = "${eclipseOutputPath}"

    }
    if (entry.kind == "src") {
      entry.output = "${eclipseSrcOutputPath}"

    }
  }
}
